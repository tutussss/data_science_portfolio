<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:pls="http://www.w3.org/2005/01/pronunciation-lexicon" xmlns:ssml="http://www.w3.org/2001/10/synthesis" xmlns:svg="http://www.w3.org/2000/svg">
<head>
  <meta charset="UTF-8" />
  <title>How to do it&#x2026;</title>
  <link type="text/css" rel="stylesheet" media="all" href="style.css" />
  <link type="text/css" rel="stylesheet" media="all" href="core.css" />
</head>
<body>
  <div id="sbo-rt-content"><section>

    <header>

      <h1 class="header-title">How to do itâ€¦</h1>

    </header>

    <article>

      <p>Let's create a Tableau workbook based on semi-structured data. At the Snowflake sample database we have a table <kbd>HOURLY_16_TOTAL</kbd> with 392 mln rows and 322 GB. This dataset keeps the last four days of hourly weather forecasts for 20,000+ cities.</p>

      <ol>

        <li>Create a new Tableau data source with a Snowflake connection:
<ul>
<li><span class="packt_screen">Warehouse</span>: <kbd>COMPUTE_WH</kbd></li>
<li><span class="packt_screen">Database</span>: <kbd>SNOWFLAKE_SAMPLE_DATA</kbd></li>
<li><span class="packt_screen">Schema</span>: <kbd>WEATHER</kbd></li>
</ul>
</li>

      </ol>

      <ol start="2">

        <li>Drag and drop custom SQL element and use this query, that will parse the <kbd>VARIANT</kbd> data type, as follows:</li>

      </ol>

      <pre style="padding-left: 60px;"><strong>select (V:main.temp_max - 273.15)::FLOAT * 1.8000 + 32.00 as temp_max_far,      (V:main.temp_min - 273.15)::FLOAT * 1.8000 + 32.00 as temp_min_far,</strong><br/><strong>  cast(V:time as timestamp) time,</strong><br/><strong>       V:city.coord.lat::FLOAT lat,</strong><br/><strong>       V:city.coord.lon::FLOAT lon,</strong><br/><strong>       v:city.name::VARCHAR,</strong><br/><strong>       v:city.country::VARCHAR,</strong><br/><strong>      v:city:id,</strong><br/><strong>      V</strong></pre>

      <p style="padding-left: 60px;">From <kbd>"SNOWFLAKE_SAMPLE_DATA"."WEATHER"." HOURLY_16_TOTAL"</kbd>  you can use another table that is much smaller, such as <kbd>DAILY_14_TOTAL</kbd> (37 mln rows). In addition, you can always specify <kbd>LIMIT</kbd> at the end of the query in order to limit you output.</p>

      <p class="mce-root"></p>

      <ol start="3">

        <li>Then we can build the dashboard in order to see the minimum temperature in Fahrenheit across the world<span>, as follows</span>:</li>

      </ol>

      <p class="CDPAlignCenter CDPAlign">

        <img class="aligncenter size-full wp-image-1930 image-border" src="images/433956dd-963c-432f-beed-52177c1faa38.png" style="width:100.00em;height:62.58em;" />

      </p>

      <p>Tableau has special function pass-through functions that can send SQL expressions to the database, without being interpreted by Tableau. In our case with weather data, we can create a new calculated field <kbd>WIND SPEED</kbd>: <kbd>RAWSQL_REAL("v:wind.speed::float",[V])</kbd> and it will add wind speed to our dataset.</p>

    </article>

  </section>

</div>
</body>
</html>